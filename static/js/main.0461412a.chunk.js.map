{"version":3,"sources":["FileInput.js","Show.js","Viewer.js","App.js","index.js"],"names":["FileInput","handleChangeFile","e","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_loop","value","PapaParse","parse","complete","result","_this","props","onFileLoaded","data","name","_iterator","target","files","Symbol","iterator","next","done","err","return","react_default","a","createElement","style","backgroundColor","width","height","display","justifyContent","alignItems","className","id","type","accept","onChange","this","multiple","htmlFor","Component","tumblr_re","Gfycat","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","webmUrl","fetch","concat","url","pathname","then","r","json","setState","gfyItem","catch","console","error","autoPlay","loop","controls","src","Iframe","_this2","imgLoaded","loading","_this$props","title","restProps","objectWithoutProperties","assign","onLoad","frameBorder","scrolling","Img","_this3","imgErrored","alt","href","onError","objectFit","Strategy","_ref","host","slice","protocol","replace","test","Show_Img","Show_Gfycat","origin","match","searchParams","get","split","_url$pathname$match$s","_url$pathname$match$s2","slicedToArray","username","pic_id","src_base","toLowerCase","join","backgroundImage","map","ext","Show_Iframe","Show","_ref2","_ref2$link","link","source","URL","key","Show_Strategy","Viewer","createDropItems","types","dropItems","push","reactstrap_es","onClick","select","handleKeys","code","prev","_this$state","pos","q","Math","min","length","max","toggle","dropdown","event","selected","innerText","currentType","_","shuffle","content","handleWindowSizeChange","WindowWidth","window","innerWidth","isMobile","renderButtonDropDown","_this$state2","fa","size","ButtonIconSize","color","isOpen","caret","renderButtonBar","_this$state3","vertical","block","disabled","prevProps","addEventListener","removeEventListener","_this$state4","Show_Show","App","readFile","items","contentTypes","charAt","toUpperCase","substr","startsWith","includes","sortBy","FileInput_FileInput","Viewer_Viewer","ReactDOM","render","App_App","document","getElementById"],"mappings":"gUAIqBA,6MAElBC,iBAAmB,SAAAC,GAAK,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IACvB,IADuB,IACvBC,EADuBC,EAAA,eACdC,EADcF,EAAAE,MAErBC,IAAUC,MAAMF,EAAO,CACrBG,SAAU,SAACC,GACTC,EAAKC,MAAMC,aAAaH,EAAOI,KAAMR,EAAMS,UAHjDC,EAAkBjB,EAAEkB,OAAOC,MAA3BC,OAAAC,cAAApB,GAAAI,EAAAY,EAAAK,QAAAC,MAAAtB,GAAA,EAAkCK,IADX,MAAAkB,GAAAtB,GAAA,EAAAC,EAAAqB,EAAA,YAAAvB,GAAA,MAAAgB,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAvB,EAAA,MAAAC,6EAWvB,OACEuB,EAAAC,EAAAC,cAAA,OACEC,MAAO,CACLC,gBAAiB,QACjBC,MAAO,OACPC,OAAQ,OACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAGdT,EAAAC,EAAAC,cAAA,OAAKQ,UAAU,wBACbV,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,SACES,GAAG,aACHC,KAAK,OACLC,OAAO,OACPC,SAAUC,KAAK1C,iBACf2C,UAAQ,IAEVhB,EAAAC,EAAAC,cAAA,SAAOe,QAAQ,cAAf,0BAjC6BC,6BCDjCC,SAAY,8BAEZC,cACJ,SAAAA,EAAYjC,GAAO,IAAAD,EAAA,OAAAmC,OAAAC,EAAA,EAAAD,CAAAN,KAAAK,IACjBlC,EAAAmC,OAAAE,EAAA,EAAAF,CAAAN,KAAAM,OAAAG,EAAA,EAAAH,CAAAD,GAAAK,KAAAV,KAAM5B,KACDuC,MAAQ,CAAEC,QAAS,MACxBC,MAAK,oCAAAC,OAAqC1C,EAAM2C,IAAIC,WACjDC,KAAK,SAAAC,GAAC,OAAIA,EAAEC,SACZF,KAAK,SAAA3C,GAAI,OAAIH,EAAKiD,SAAS,CAAER,QAAStC,EAAK+C,QAAQT,YACnDU,MAAM,SAAAvC,GAAG,OAAIwC,QAAQC,MAAMzC,KANbZ,wEAUjB,OAAOc,EAAAC,EAAAC,cAAA,SAAOsC,UAAQ,EAACC,MAAI,EAACC,UAAQ,EAACC,IAAK5B,KAAKW,MAAMC,iBAXpCT,aAef0B,cACJ,SAAAA,EAAYzD,GAAO,IAAA0D,EAAA,OAAAxB,OAAAC,EAAA,EAAAD,CAAAN,KAAA6B,IACjBC,EAAAxB,OAAAE,EAAA,EAAAF,CAAAN,KAAAM,OAAAG,EAAA,EAAAH,CAAAuB,GAAAnB,KAAAV,KAAM5B,KAIR2D,UAAY,kBAAMD,EAAKV,SAAS,CAAEY,SAAS,KAHzCF,EAAKnB,MAAQ,CAAEqB,SAAS,GAFPF,wEAOV,IAAAG,EAC8BjC,KAAK5B,MAAlCwD,EADDK,EACCL,IAAKM,EADND,EACMC,MAAUC,EADhB7B,OAAA8B,EAAA,EAAA9B,CAAA2B,EAAA,iBAEP,OACEhD,EAAAC,EAAAC,cAAA,SAAAmB,OAAA+B,OAAA,CACE1C,UAAWK,KAAKW,MAAMqB,QAAU,iBAAmB,GACnDM,OAAQtC,KAAK+B,UACbG,MAAOA,EACPN,IAAKA,EACLW,YAAY,IACZC,UAAU,MACNL,WAlBShC,aAwBfsC,cACJ,SAAAA,EAAYrE,GAAO,IAAAsE,EAAA,OAAApC,OAAAC,EAAA,EAAAD,CAAAN,KAAAyC,IACjBC,EAAApC,OAAAE,EAAA,EAAAF,CAAAN,KAAAM,OAAAG,EAAA,EAAAH,CAAAmC,GAAA/B,KAAAV,KAAM5B,KAIR2D,UAAY,kBAAMW,EAAKtB,SAAS,CAAEY,SAAS,KALxBU,EAOnBC,WAAa,kBAAMD,EAAKtB,SAAS,CAAEY,SAAS,EAAOR,OAAO,KALxDkB,EAAK/B,MAAQ,CAAEqB,SAAS,EAAMR,OAAO,GAFpBkB,wEAUjB,IAAM/C,EAAYK,KAAKW,MAAMqB,QACzB,UACAhC,KAAKW,MAAMa,MACX,QACA,GACJ,OACEvC,EAAAC,EAAAC,cAAA,OACEQ,UAAWA,EACXiD,IAAI,GACJhB,IAAK5B,KAAK5B,MAAM2C,IAAI8B,KACpBP,OAAQtC,KAAK+B,UACbe,QAAS9C,KAAK2C,WACdvD,MAAO,CAAE2D,UAAW,oBAvBV5C,aA6BZ6C,EAAW,SAAAC,GAAa,IACxBf,EAAON,EADOb,EAAUkC,EAAVlC,IAElB,QAAQ,GACN,IAAkB,gBAAbA,EAAImC,KACP,GAAiC,QAA7BnC,EAAIC,SAASmC,MAAM,EAAG,GAAc,CACtCjB,EAAQ,QACRN,EACEb,EAAIqC,SACJ,cACArC,EAAIC,SAASqC,QAAQ,OAAQ,IAC7B,kBACF,MAGJ,KAAKjD,EAAUkD,KAAKvC,EAAImC,MACtB,OAAOjE,EAAAC,EAAAC,cAACoE,EAAD,CAAKxC,IAAKA,IACnB,IAAkB,eAAbA,EAAImC,KACP,OAAOjE,EAAAC,EAAAC,cAACqE,EAAD,CAAQzC,IAAKA,IACtB,IAAkB,oBAAbA,EAAImC,KACPhB,EAAQ,UACRN,EACEb,EAAI0C,OAAS,eAAiB1C,EAAIC,SAAS0C,MAAM,kBAAkB,GACrE,MACF,IAAkB,oBAAb3C,EAAImC,KACPhB,EAAQ,UACRN,EAAMb,EAAI0C,OAAS,UAAY1C,EAAI4C,aAAaC,IAAI,WACpD,MACF,IAAkB,iBAAb7C,EAAImC,KACPhB,EAAQ,WACRN,EAAMb,EAAI0C,OAAS,UAAY1C,EAAIC,SAAS6C,MAAM,KAAK,GACvD,MACF,IAAkB,2BAAb9C,EAAImC,KAAT,IAAAY,EAC6B/C,EAAIC,SAC5B0C,MAAM,mCACNP,MAAM,GAHXY,EAAAzD,OAAA0D,EAAA,EAAA1D,CAAAwD,EAAA,GACSG,EADTF,EAAA,GACmBG,EADnBH,EAAA,GAIQI,EAAW,CACf,sCACAF,EAAS,GAAGG,cACZH,EACAC,GACAG,KAAK,KACP,OACEpF,EAAAC,EAAAC,cAAA,OACEQ,UAAU,MACVP,MAAO,CACLkF,gBAAiB,CAAC,MAAO,OACtBC,IAAI,SAAAC,GAAG,aAAA1D,OAAWqD,EAAX,KAAArD,OAAuB0D,EAAvB,OACPH,KAAK,QAIhB,QACEnC,EAAQ,UACRN,EAAMb,EAAI8B,KAEd,OAAO5D,EAAAC,EAAAC,cAACsF,EAAD,CAAQ7C,IAAKA,EAAKM,MAAOA,KAGnB,SAASwC,EAATC,GAA+C,IAAAC,EAAAtE,OAAA0D,EAAA,EAAA1D,CAAAqE,EAA/BE,KAA+B,GAAlBC,GAAkBF,EAAA,GAAAA,EAAA,IAATxF,EAASuF,EAATvF,MAC7C2B,EAAM,IAAIgE,IAAID,GACpB,OACE7F,EAAAC,EAAAC,cAAA,OAAK6F,IAAKF,EAAQnF,UAAU,iBAAiBP,MAAOA,GAClDH,EAAAC,EAAAC,cAAC8F,EAAD,CAAUlE,IAAKA,+CC/HAmE,cACnB,SAAAA,EAAY9G,GAAO,IAAAD,EAAAmC,OAAAC,EAAA,EAAAD,CAAAN,KAAAkF,IACjB/G,EAAAmC,OAAAE,EAAA,EAAAF,CAAAN,KAAAM,OAAAG,EAAA,EAAAH,CAAA4E,GAAAxE,KAAAV,KAAM5B,KAsBR+G,gBAAkB,WAAM,IACdC,EAAUjH,EAAKC,MAAfgH,MACJC,EAAY,GAChB,IAAK,IAAIL,KAAOI,EACdC,EAAUC,KAAKrG,EAAAC,EAAAC,cAACoG,EAAA,EAAD,CAAcP,IAAKA,EAAKQ,QAASrH,EAAKsH,QAASL,EAAMJ,KAEtE,OAAOK,GA7BUlH,EA2CnBuH,WAAa,SAAAnI,GACX,OAAQA,EAAEoI,MACR,IAAK,YACL,IAAK,OACH,OAAOxH,EAAKyH,OACd,IAAK,aACL,IAAK,OACH,OAAOzH,EAAKU,OACd,QACE,SApDaV,EAwDnBU,KAAO,WAAM,IAAAgH,EACO1H,EAAKwC,MAAhBmF,EADID,EACJC,IAAKC,EADDF,EACCE,EACZ5H,EAAKiD,SAAS,CACZ0E,IAAKE,KAAKC,IAAIH,EAAM,EAAGC,EAAEG,OAAS,MA3DnB/H,EA+DnByH,KAAO,WAAM,IACHE,EAAQ3H,EAAKwC,MAAbmF,IACR3H,EAAKiD,SAAS,CAAE0E,IAAKE,KAAKG,IAAIL,EAAM,EAAG,MAjEtB3H,EAqEnBiI,OAAS,WACPjI,EAAKiD,SAAS,CAAEiF,UAAWlI,EAAKwC,MAAM0F,YAtErBlI,EAyEnBsH,OAAS,SAACa,GACR,IAAMC,EAAWD,EAAM7H,OAAO+H,UAC9BrI,EAAKiD,SAAS,CACVqF,YAAaF,EACbR,EAAGW,IAAEC,QAAQxI,EAAKC,MAAMwI,QAAQL,IAChCT,IAAK,KA9EQ3H,EAkFnB0I,uBAAyB,WACvB1I,EAAKiD,SAAS,CACZ0F,YAAaC,OAAOC,WACpBC,SAAW9I,EAAKwC,MAAMmG,aAAe,OArFtB3I,EAyFnB+I,qBAAuB,WAAM,IAAAC,EAC4BhJ,EAAKwC,MAApD0F,EADmBc,EACnBd,SAAUI,EADSU,EACTV,YAAapB,EADJ8B,EACI9B,UAAW4B,EADfE,EACeF,SACtCb,EAASa,EAAWhI,EAAAC,EAAAC,cAACiI,EAAA,EAAD,CAAcC,KAAMlJ,EAAKwC,MAAM2G,eAAgBC,MAAM,YAAcd,EAC3F,OACExH,EAAAC,EAAAC,cAACoG,EAAA,EAAD,CAAgB5F,UAAU,oBAAoB6H,OAAQnB,EAAUD,OAAQjI,EAAKiI,QAC3EnH,EAAAC,EAAAC,cAACoG,EAAA,EAAD,CAAgBgC,MAAM,QAAQE,OAAQR,GACnCb,GAEHnH,EAAAC,EAAAC,cAACoG,EAAA,EAAD,KACGF,KAlGUlH,EAuGnBuJ,gBAAkB,WAAM,IAAAC,EACOxJ,EAAKwC,MAA1BoF,EADc4B,EACd5B,EAAGD,EADW6B,EACX7B,IAAKmB,EADMU,EACNV,SAChB,OAAOhI,EAAAC,EAAAC,cAACoG,EAAA,EAAD,CAAaqC,SAAUX,EAAUY,OAAK,EAAClI,UAAU,oBACtDV,EAAAC,EAAAC,cAAA,UAAQ2I,SAAkB,IAARhC,EAAWN,QAASrH,EAAKyH,MACzC3G,EAAAC,EAAAC,cAACiI,EAAA,EAAD,CAAaC,KAAMlJ,EAAKwC,MAAM2G,eAAgBC,MAAM,aAEpDpJ,EAAK+I,uBACPjI,EAAAC,EAAAC,cAAA,UAAQ2I,SAAUhC,IAAQC,EAAEG,OAAS,EAAGV,QAASrH,EAAKU,MACpDI,EAAAC,EAAAC,cAACiI,EAAA,EAAD,CAAcC,KAAMlJ,EAAKwC,MAAM2G,eAAgBC,MAAM,eA/GxC,IAAAtF,EAGS9D,EAAKC,MAAvBwI,EAHS3E,EAGT2E,QAASxB,EAHAnD,EAGAmD,MAHA,OAKjBjH,EAAKwC,MAAQ,CACX8F,YAAarB,EAAM,GACnBW,EAAGW,IAAEC,QAAQC,EAAQxB,EAAM,KAC3BU,IAAK,EACLO,UAAU,EACVS,YAAaC,OAAOC,WACpBC,SAAUF,OAAOC,YAAc,IAC/B3B,UAAWlH,EAAKgH,kBAChBmC,eAAgB,IAbDnJ,kFAiBA4J,GACb/H,KAAK5B,MAAMgH,QAAU2C,EAAU3C,OACjCpF,KAAKoB,SAAS,CAACiE,UAAWrF,KAAKmF,gEAejC4B,OAAOiB,iBAAiB,UAAWhI,KAAK0F,YACxCqB,OAAOiB,iBAAiB,SAAUhI,KAAK6G,uEAIvCE,OAAOkB,oBAAoB,UAAWjI,KAAK0F,YAC3CqB,OAAOkB,oBAAoB,SAAUjI,KAAK6G,yDA4EnC,IAAAqB,EACyBlI,KAAKW,MAA7BmF,EADDoC,EACCpC,IAAKC,EADNmC,EACMnC,EAAGU,EADTyB,EACSzB,YAEhB,OACExH,EAAAC,EAAAC,cAAA,OAAKQ,UAAU,oBACXK,KAAK0H,kBACPzI,EAAAC,EAAAC,cAACgJ,EAAD,CAAMtD,KAAM,CAAC4B,EAAaV,EAAED,cA3HA3F,aCHfiI,cACnB,SAAAA,EAAYhK,GAAO,IAAAD,EAAA,OAAAmC,OAAAC,EAAA,EAAAD,CAAAN,KAAAoI,IACjBjK,EAAAmC,OAAAE,EAAA,EAAAF,CAAAN,KAAAM,OAAAG,EAAA,EAAAH,CAAA8H,GAAA1H,KAAAV,KAAM5B,KAQRiK,SAAW,SAAC/J,GAAS,IAAAuH,EACO1H,EAAKwC,MAAvBiG,EADWf,EACXe,QACJ0B,EAAqB,OAAZ1B,EAAmB,GAAKA,EACjC2B,EAHe1C,EACFT,MADE5H,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAInB,QAAAC,EAAAY,EAAkBF,EAAlBK,OAAAC,cAAApB,GAAAI,EAAAY,EAAAK,QAAAC,MAAAtB,GAAA,EAAwB,KAAfM,EAAeF,EAAAE,MAChB+B,EAAO/B,EAAM,GACjB+B,EAAOA,EAAK2I,OAAO,GAAGC,cAAgB5I,EAAK6I,OAAO,GAClD,IAAI3H,EAAMjD,EAAM,GACG,qBAARiD,GAAwBA,EAAI4H,WAAW,UAG7CjC,IAAEkC,SAASL,EAAc1I,KAC1ByI,EAAMzI,GAAQ,GACd0I,EAAajD,KAAKzF,IAEtByI,EAAMzI,GAAMyF,KAAKvE,KAfF,MAAAhC,GAAAtB,GAAA,EAAAC,EAAAqB,EAAA,YAAAvB,GAAA,MAAAgB,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAvB,EAAA,MAAAC,GAmBnB6K,EAAe7B,IAAEmC,OAAON,GAExBpK,EAAKiD,SAAS,CACVwF,QAAS0B,EACTlD,MAAOmD,KA7BXpK,EAAKwC,MAAQ,CACXiG,QAAS,KACTxB,MAAO,IALQjH,wEAoCV,IAAAgJ,EACoBnH,KAAKW,MAAxBiG,EADDO,EACCP,QAASxB,EADV+B,EACU/B,MACjB,OAAgB,OAAZwB,EACK3H,EAAAC,EAAAC,cAAC2J,EAAD,CAAWzK,aAAc2B,KAAKqI,WAEhCpJ,EAAAC,EAAAC,cAAC4J,EAAD,CAAQnC,QAASA,EAASxB,MAAOA,WA1CXjF,mBCCjC6I,IAASC,OAAOhK,EAAAC,EAAAC,cAAC+J,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.0461412a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./FileInput.css\";\nimport PapaParse from \"papaparse\";\n\nexport default class FileInput extends Component {\n\n   handleChangeFile = e => {\n    for (let value of e.target.files) {\n      PapaParse.parse(value, {\n        complete: (result) => {\n          this.props.onFileLoaded(result.data, value.name);\n        }\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        style={{\n          backgroundColor: \"black\",\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}\n      >\n        <div className=\"file-input-container\">\n          <h1>BFV</h1>\n          <input\n            id=\"file-input\"\n            type=\"file\"\n            accept=\".csv\"\n            onChange={this.handleChangeFile}\n            multiple\n          />\n          <label htmlFor=\"file-input\">Choose a file</label>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React, { Component } from \"react\";\nimport \"./Show.css\";\n\nconst tumblr_re = /^\\d+?\\.media\\.tumblr\\.com$/;\n\nclass Gfycat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { webmUrl: null };\n    fetch(`https://api.gfycat.com/v1/gfycats${props.url.pathname}`)\n      .then(r => r.json())\n      .then(data => this.setState({ webmUrl: data.gfyItem.webmUrl }))\n      .catch(err => console.error(err));\n  }\n\n  render() {\n    return <video autoPlay loop controls src={this.state.webmUrl} />;\n  }\n}\n\nclass Iframe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  render() {\n    const { src, title, ...restProps } = this.props;\n    return (\n      <iframe\n        className={this.state.loading ? \"iframe-loading\" : \"\"}\n        onLoad={this.imgLoaded}\n        title={title}\n        src={src}\n        frameBorder=\"0\"\n        scrolling=\"no\"\n        {...restProps}\n      />\n    );\n  }\n}\n\nclass Img extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: false };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  imgErrored = () => this.setState({ loading: false, error: true });\n\n  render() {\n    const className = this.state.loading\n      ? \"loading\"\n      : this.state.error\n      ? \"error\"\n      : \"\";\n    return (\n      <img\n        className={className}\n        alt=\"\"\n        src={this.props.url.href}\n        onLoad={this.imgLoaded}\n        onError={this.imgErrored}\n        style={{ objectFit: \"contain\" }}\n      />\n    );\n  }\n}\n\nconst Strategy = ({ url }) => {\n  let title, src;\n  switch (true) {\n    case url.host === \"i.imgur.com\":\n      if (url.pathname.slice(0, 3) === \"/a/\") {\n        title = \"imgur\";\n        src =\n          url.protocol +\n          \"//imgur.com\" +\n          url.pathname.replace(\".jpg\", \"\") +\n          \"/embed?pub=true\";\n        break;\n      }\n    // eslint-disable-next-line -- FALLTHROUGH\n    case tumblr_re.test(url.host):\n      return <Img url={url} />;\n    case url.host === \"gfycat.com\":\n      return <Gfycat url={url} />;\n    case url.host === \"www.xvideos.com\":\n      title = \"xvideos\";\n      src =\n        url.origin + \"/embedframe/\" + url.pathname.match(/\\/video(\\d+)\\//)[1];\n      break;\n    case url.host === \"www.pornhub.com\":\n      title = \"pornhub\";\n      src = url.origin + \"/embed/\" + url.searchParams.get(\"viewkey\");\n      break;\n    case url.host === \"xhamster.com\":\n      title = \"xhamster\";\n      src = url.origin + \"/embed/\" + url.pathname.split(\"/\")[2];\n      break;\n    case url.host === \"www.hentai-foundry.com\":\n      const [username, pic_id] = url.pathname\n        .match(/^\\/pictures\\/user\\/(.*)\\/(.*)\\//)\n        .slice(1);\n      const src_base = [\n        \"https://pictures.hentai-foundry.com\",\n        username[0].toLowerCase(),\n        username,\n        pic_id\n      ].join(\"/\");\n      return (\n        <div\n          className=\"img\"\n          style={{\n            backgroundImage: [\"png\", \"jpg\"]\n              .map(ext => `url(${src_base}.${ext})`)\n              .join(\",\")\n          }}\n        />\n      );\n    default:\n      title = \"default\";\n      src = url.href;\n  }\n  return <Iframe src={src} title={title} />;\n};\n\nexport default function Show({ link: [list, source], style }) {\n  const url = new URL(source);\n  return (\n    <div key={source} className=\"item-container\" style={style}>\n      <Strategy url={url} />\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport Show from \"./Show\";\nimport \"./Viewer.css\";\nimport _ from \"lodash\";\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem, ButtonGroup } from \"reactstrap\";\nimport { FaCaretLeft, FaCaretRight, FaStarOfLife } from \"react-icons/fa\";\n\n\nexport default class Viewer extends Component {\n  constructor(props) {\n    super(props);\n    \n    const { content, types} = this.props;\n\n    this.state = {\n      currentType: types[0],\n      q: _.shuffle(content[types[0]]),\n      pos: 0,\n      dropdown: false,\n      WindowWidth: window.innerWidth,\n      isMobile: window.innerWidth <= 600,\n      dropItems: this.createDropItems(),\n      ButtonIconSize: 40 \n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.types !== prevProps.types) {\n      this.setState({dropItems: this.createDropItems()})\n    }\n  }\n\n  createDropItems = () => {\n    const { types } = this.props\n    let dropItems = [];\n    for (let key in types) {\n      dropItems.push(<DropdownItem key={key} onClick={this.select}>{types[key]}</DropdownItem>)\n    }\n    return dropItems\n\n  }\n\n  componentDidMount(){\n    window.addEventListener('keydown', this.handleKeys);\n    window.addEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeys);\n    window.removeEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  handleKeys = e => {\n    switch (e.code) {\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        return this.prev();\n      case \"ArrowRight\":\n      case \"KeyD\":\n        return this.next();\n      default:\n        return;\n    }\n  };\n\n  next = () => {\n   const { pos, q } = this.state\n    this.setState({\n      pos: Math.min(pos + 1, q.length - 1)\n    });\n  };\n\n  prev = () => {\n    const { pos } = this.state;\n    this.setState({ pos: Math.max(pos - 1, 0) });\n  };\n\n\n  toggle = () => {\n    this.setState({ dropdown: !this.state.dropdown });\n  }\n\n  select = (event) => {\n    const selected = event.target.innerText\n    this.setState({\n        currentType: selected,\n        q: _.shuffle(this.props.content[selected]),\n        pos: 0\n    })\n  }\n\n  handleWindowSizeChange = () => {\n    this.setState({ \n      WindowWidth: window.innerWidth,\n      isMobile : this.state.WindowWidth <= 600\n    });\n  }\n\n  renderButtonDropDown = () => {\n    const { dropdown, currentType, dropItems, isMobile } = this.state;\n    let toggle = isMobile ? <FaStarOfLife size={this.state.ButtonIconSize} color='#f8f9fa'/> : currentType\n    return (\n      <ButtonDropdown className=\"dropdown-selector\" isOpen={dropdown} toggle={this.toggle}>\n        <DropdownToggle color=\"black\" caret={!isMobile}>\n          {toggle}\n        </DropdownToggle>\n        <DropdownMenu>\n          {dropItems}\n        </DropdownMenu>\n      </ButtonDropdown>)\n    }\n\n  renderButtonBar = () => {\n    const { q, pos, isMobile } = this.state;\n    return <ButtonGroup vertical={isMobile} block className=\"button-container\">\n      <button disabled={pos === 0} onClick={this.prev}>\n        <FaCaretLeft size={this.state.ButtonIconSize} color='#f8f9fa'/>\n      </button>\n      { this.renderButtonDropDown() }\n      <button disabled={pos === q.length - 1} onClick={this.next}>\n        <FaCaretRight size={this.state.ButtonIconSize} color='#f8f9fa'/>\n      </button>\n    </ButtonGroup>\n  }\n\n  render() {\n    const { pos, q, currentType } = this.state;\n\n    return (\n      <div className=\"viewer-container\">\n        { this.renderButtonBar() }\n        <Show link={[currentType, q[pos]]} />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport FileInput from \"./FileInput\";\nimport Viewer from \"./Viewer\";\nimport _ from \"lodash\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = { \n      content: null,\n      types: []\n    };\n  }\n\n  readFile = (data) => {\n    const { content, types} = this.state\n    let items = (content === null ? {} : content)\n    let contentTypes = types\n    for (let value of data) {\n        let type = value[0]\n        type = type.charAt(0).toUpperCase() + type.substr(1)\n        let url = value[1]\n        if (typeof url === \"undefined\" || !url.startsWith(\"http\")) {\n            continue\n        }\n        if (!_.includes(contentTypes, type)) {\n            items[type] = []\n            contentTypes.push(type)\n        }\n        items[type].push(url)\n        \n    }\n\n    contentTypes = _.sortBy(contentTypes)\n\n    this.setState({\n        content: items,\n        types: contentTypes\n    })\n}\n\n  render() {\n    const { content, types } = this.state\n    if (content === null) {\n      return <FileInput onFileLoaded={this.readFile} />;\n    }\n    return <Viewer content={content} types={types} />;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}